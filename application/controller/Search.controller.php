<?phpuse \Glial\Synapse\Singleton;use \Glial\Parser\Google\Google;use \Glial\Synapse\Controller;use \Glial\I18n\I18n;class Search extends Controller{    function index()    {        $this->title = __("Search");        $this->ariane = "> " . $this->title;        if (!empty($_POST['google_search']["key_words"]))        {                                   $this->data['google_search'] = $_POST['google_search'];            $this->data['google_search']['date'] = date("Y-m-d H:i:s");            $this->data['google_search']['ip'] = $_SERVER['REMOTE_ADDR'];            $this->data['google_search']['referer'] = $_SERVER['REMOTE_ADDR'];            //debug($this->data['google_search']);            //die();            if (!$this->db['mysql_write']->sql_save($this->data))            {                //die("KO sdwghwdfwdfgwfg");                $error = $this->db['mysql_write']->sql_error();                $_SESSION['ERROR'] = array_merge($_SESSION['ERROR'], $error);                set_flash("error", __("Registration error"), __("One or more problem came when you try to register your account, please verify your informations"));                $ret = array();                foreach ($_POST['google_search'] as $var => $val)                {                    $ret[] = "google_search:" . $var . ":" . $val;                }                $param = implode("/", $ret);                header("location: " . LINK . "search/index/" . $param);            } elseif ($_SERVER['REQUEST_METHOD'] == "POST")            {                $ret = array();                foreach ($_POST['google_search'] as $var => $val)                {                    $ret[] = "google_search:" . $var . ":" . $val;                }                $param = implode("/", $ret);                header("location: " . LINK . "search/index/" . $param);            }        }        if (!empty($_GET['google_search']['key_words']))        {            $start = microtime(true);                                    $this->data['language'] = I18n::Get();            $google = new google;            $this->data['search_result'] = $google->search("www.estrildidae.net/" . $this->data['language'] . "/", $_GET['google_search']['key_words']);            $this->data['execution_time'] = round(microtime(true) - $start, 3);            $this->set("data", $this->data);						        }    }}?>